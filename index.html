<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="dark" />

  <!-- Faster first request to CocktailDB -->
  <link rel="preconnect" href="https://www.thecocktaildb.com" crossorigin>

  <title>Cocktail Finder ‚Äî Random + Search</title>

  <!-- Glam fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">

  <!-- Main styles (cache-busted) -->
  <link rel="stylesheet" href="styles.css?v=107" />

  <!-- Small, hard overrides + widget styles used by script -->
  <style>
    /* layout guardrails */
    html, body { height:100%; }
    body { display:flex !important; flex-direction:column !important; min-height:100vh !important; }
    main.container { flex:1 0 auto !important; }
    body > footer.footer,
    body > footer.footer::before,
    body > footer.footer::after { border-top:0 !important; box-shadow:none !important; background:transparent !important; }
    hr { display:none !important; height:0 !important; border:0 !important; }

    /* ---------------- Toast ---------------- */
    .toast{
      position:fixed; left:50%; transform:translateX(-50%);
      bottom:calc(18px + env(safe-area-inset-bottom, 0px));
      z-index:9999; background:rgba(17,24,39,.92); color:#fff;
      border-radius:12px; padding:10px 12px; display:flex; gap:10px; align-items:center;
      box-shadow:0 10px 30px rgba(0,0,0,.3); backdrop-filter:blur(6px);
    }
    .toast[hidden]{ display:none !important; }
    .toast .btn{ background:#111827; color:#fff; border:1px solid rgba(255,255,255,.15); border-radius:10px; padding:6px 10px; cursor:pointer }

    @media (max-width:768px){
      .toast{ bottom:calc(18px + env(safe-area-inset-bottom, 0px) + 64px); }
    }

    /* --------------- Suggestions (inline list) --------------- */
    .suggest-wrap{ position:relative; }
    #suggestions{
      position:absolute; left:0; right:0; top:calc(100% + 6px);
      background:rgba(17,24,39,.95); color:#fff; border:1px solid rgba(255,255,255,.12);
      border-radius:12px; padding:6px; list-style:none; margin:0; z-index:50; max-height:280px; overflow:auto;
      box-shadow:0 14px 32px rgba(0,0,0,.3); backdrop-filter:blur(6px)
    }
    #suggestions[hidden]{ display:none; }
    #suggestions li{ padding:8px 10px; border-radius:10px; cursor:pointer }
    #suggestions li:hover, #suggestions li.active{ background:rgba(255,255,255,.08) }

    /* --------------- Fallback Share dialog --------------- */
    #shareDialog{ border:0; border-radius:16px; padding:0; background:rgba(17,24,39,.98); color:#fff; max-width:540px; width:92vw; }
    #shareDialog .dialog-content{ padding:16px 16px 20px; }
    #shareClose{ position:absolute; right:12px; top:10px; }

    /* --------------- Mobile Print Preview dialog --------------- */
    #printDialog{
      max-width:720px; width:92vw; border:0; border-radius:16px; padding:0; overflow:hidden;
      box-shadow:0 30px 60px rgba(0,0,0,.45); background:rgba(17,24,39,.96); color:#fff
    }
    .print-shell{ padding:16px }
    .print-head{ display:flex; justify-content:space-between; align-items:center; gap:12px; margin-bottom:8px }
    .print-head h3{ margin:0; font:700 20px/1.2 "Playfair Display", Georgia, serif }
    .print-actions{ display:flex; gap:8px }
    .print-actions .btn{ background:#111827; color:#fff; border:1px solid rgba(255,255,255,.14); border-radius:10px; padding:8px 12px }
    .print-body{ background:#0b0f19; border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:12px; max-height:62vh; overflow:auto }
    .print-grid{ display:grid; grid-template-columns:140px 1fr; gap:14px }
    @media (max-width:520px){ .print-grid{ grid-template-columns:1fr } }
    .print-body img{ width:100%; border-radius:10px }
    .print-body h4{ margin:.25rem 0; font:600 16px/1.2 "Playfair Display", Georgia, serif }
    .print-body ul{ padding-left:1.2em; margin:.25rem 0 }
    .print-body .meta{ opacity:.8; margin:.25rem 0 .75rem }
  </style>
</head>
<body>
  <!-- soft dark overlay behind everything -->
  <div class="bg-overlay" aria-hidden="true"></div>

  <header class="app-header">
    <h1 class="brand-title">COCKTAIL FINDER</h1>
    <p class="brand-subtitle">RANDOM SIPS ¬∑ CURATED PICKS</p>
  </header>

  <main class="container">
    <!-- Tabs -->
    <nav class="tabs">
      <button class="tab active" data-tab="random">üçπ Random</button>
      <button class="tab" data-tab="search">üîé Search</button>
    </nav>

    <!-- Status line (accessible) -->
    <p id="status" class="status" aria-live="polite" role="status"></p>

    <!-- Random mode -->
    <section id="pane-random" class="pane">
      <div class="controls">
        <button id="newBtn" class="btn primary">New Drink</button>
        <button id="saveBtn" class="btn">‚≠ê Save</button>
        <button id="copyBtn" class="btn">üìã Copy</button>
        <button id="shareBtn" class="btn">üîó Share</button>
        <button id="printBtn" class="btn">üñ®Ô∏è Print</button>
      </div>

      <article id="card" class="card" hidden>
        <img id="thumb" class="thumb" alt="Drink image" />
        <div class="card-body">
          <h2 id="title" class="card-title"></h2>
          <p id="meta" class="muted"></p>
          <div class="grid-2">
            <div>
              <h3 class="card-section">Ingredients</h3>
              <ul id="ingredients" class="ing-list"></ul>
            </div>
            <div>
              <h3 class="card-section">Instructions</h3>
              <p id="instructions" class="instructions"></p>
            </div>
          </div>
        </div>
      </article>
    </section>

    <!-- Search mode -->
    <section id="pane-search" class="pane" hidden>
      <form id="searchForm" class="controls suggest-wrap" autocomplete="off">
        <input
          id="searchInput"
          type="text"
          placeholder="Search by name (e.g., margarita)"
          list="nameSuggestions"
          required
        />
        <!-- Native datalist (optional) -->
        <datalist id="nameSuggestions"></datalist>
        <!-- Inline, richer suggestions used by script.js -->
        <ul id="suggestions" hidden></ul>

        <button type="submit" class="btn primary">Search</button>
        <button type="button" id="randomBtn" class="btn">üé≤ Random</button>
      </form>

      <section id="results" class="grid"></section>

      <!-- Reusable details dialog -->
      <dialog id="detailsDialog">
        <article class="dialog-content">
          <button id="closeDialog" class="btn small" aria-label="Close">‚úï</button>
          <h2 id="dTitle" class="card-title"></h2>
          <img id="dImg" alt="" />
          <p id="dMeta" class="muted"></p>
          <h3 class="card-section">Ingredients</h3>
          <ul id="dIngredients" class="ing-list"></ul>
          <h3 class="card-section">Instructions</h3>
          <p id="dInstructions" class="instructions"></p>
          <div class="inline-actions">
            <button id="dSaveBtn" class="btn">‚≠ê Save</button>
            <button id="dCopyBtn" class="btn">üìã Copy</button>
            <button id="dShareBtn" class="btn">üîó Share</button>
            <button id="dPrintBtn" class="btn">üñ®Ô∏è Print</button>
          </div>
        </article>
      </dialog>
    </section>

    <!-- Favorites -->
    <section class="favs">
      <details open>
        <summary>‚≠ê Favorites (<span id="favCount">0</span>)</summary>
        <div class="fav-header">
          <span class="muted small">Saved drinks</span>
          <button id="clearFavs" class="btn subtle" type="button">Clear all</button>
        </div>
        <ul id="favList" class="fav-list"></ul>
      </details>
    </section>
  </main>

  <footer class="footer" id="site-footer">
    <small>Data &amp; images:
      <a href="https://www.thecocktaildb.com/api.php" target="_blank" rel="noreferrer noopener">TheCocktailDB</a>
    </small>
  </footer>

  <!-- Fallback Share dialog (desktop/web-share unavailable) -->
  <dialog id="shareDialog">
    <article class="dialog-content">
      <button id="shareClose" class="btn small" aria-label="Close">‚úï</button>
      <h3 class="card-title" style="margin-top:0">Share</h3>
      <p class="muted" id="shareSummary" style="margin:.25rem 0 1rem"></p>
      <div class="inline-actions" style="flex-wrap:wrap;gap:8px">
        <a id="shareFacebook" class="btn" target="_blank" rel="noopener">Facebook</a>
        <a id="shareTwitter"  class="btn" target="_blank" rel="noopener">X / Twitter</a>
        <a id="shareWhatsApp" class="btn" target="_blank" rel="noopener">WhatsApp</a>
        <a id="shareEmail"    class="btn">Email</a>
        <button id="shareCopy" class="btn">Copy link</button>
      </div>
    </article>
  </dialog>

  <!-- Mobile-friendly Print Preview dialog -->
  <dialog id="printDialog">
    <div class="print-shell">
      <div class="print-head">
        <h3 id="pTitle">Print Preview</h3>
        <div class="print-actions">
          <button id="pClose" class="btn" type="button">Close</button>
          <button id="pPrint" class="btn" type="button">Print</button>
        </div>
      </div>
      <div class="print-body">
        <div class="meta" id="pMeta"></div>
        <div class="print-grid">
          <img id="pImg" alt="">
          <div>
            <h4>Ingredients</h4>
            <ul id="pIngredients"></ul>
            <h4>Instructions</h4>
            <p id="pInstructions"></p>
          </div>
        </div>
      </div>
    </div>
  </dialog>

  <!-- Toast (message + optional Undo) -->
  <div id="toast" class="toast" role="status" aria-live="polite" hidden>
    <span id="toastMsg" class="msg">Done.</span>
    <button id="toastUndo" class="btn">Undo</button>
  </div>

  <!-- Skeleton card template (kept if you add skeletons later) -->
  <template id="sk-card-sm">
    <article class="card-sm sk">
      <div class="sk-img"></div>
      <div class="pad">
        <div class="sk-line w60"></div>
        <div class="sk-line w40"></div>
        <div class="sk-buttons">
          <div class="sk-pill"></div>
          <div class="sk-pill"></div>
        </div>
      </div>
    </article>
  </template>

  <!-- App script (cache-busted) -->
  <script type="module" src="script.js?v=107"></script>
</body>
</html>
